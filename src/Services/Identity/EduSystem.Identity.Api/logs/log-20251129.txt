2025-11-29 11:16:54.495 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 11:16:55.270 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 11:16:55.636 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 11:16:56.883 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 11:16:57.001 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 11:16:57.046 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 11:16:57.046 +06:00 [INF] Hosting environment: Development
2025-11-29 11:16:57.046 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 11:16:57.402 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 523.8176ms
2025-11-29 11:16:57.447 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 11:17:15.187 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 11:17:15.187 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 11:17:15.216 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 30.8217ms
2025-11-29 11:17:15.231 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.2178ms
2025-11-29 11:17:15.414 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 11:17:15.427 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.2791ms
2025-11-29 11:17:51.283 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 11:17:51.876 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 11:17:52.111 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 11:17:52.677 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 11:17:52.783 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 11:17:53.130 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 370.3176ms
2025-11-29 11:17:53.159 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 11:17:53.160 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 11:17:53.161 +06:00 [INF] Hosting environment: Development
2025-11-29 11:17:53.161 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 11:17:56.850 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 11:17:56.850 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 11:17:56.893 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 43.9017ms
2025-11-29 11:17:56.910 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.5563ms
2025-11-29 11:17:57.044 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 11:17:57.069 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.751ms
2025-11-29 11:20:44.596 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 11:20:45.059 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 11:20:45.274 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 11:20:45.850 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 11:20:45.904 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 11:20:45.997 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 11:20:45.997 +06:00 [INF] Hosting environment: Development
2025-11-29 11:20:45.997 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 11:20:46.164 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 266.7347ms
2025-11-29 11:20:46.184 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 11:20:47.088 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 11:20:47.088 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 11:20:47.107 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 18.9148ms
2025-11-29 11:20:47.141 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.9855ms
2025-11-29 11:20:47.248 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 11:20:47.264 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.9228ms
2025-11-29 11:22:25.483 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:22:25.510 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:22:25.528 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 11:22:28.857 +06:00 [INF] Executed DbCommand (113ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:22:29.710 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:22:29.752 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:22:30.646 +06:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:22:30.699 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'EduSystem.Identity.Infrastructure.Contexts.IdentityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7493b6dd-ca3e-49ad-83aa-3be9fd707691
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7493b6dd-ca3e-49ad-83aa-3be9fd707691
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 11:22:34.057 +06:00 [INF] Setting HTTP status code 400.
2025-11-29 11:22:34.062 +06:00 [INF] Writing value of type '<>f__AnonymousType11`1' as Json.
2025-11-29 11:22:34.072 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:22:34.090 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 400 null application/json; charset=utf-8 8607.7373ms
2025-11-29 11:27:11.308 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 11:27:11.460 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 152.5871ms
2025-11-29 11:27:11.548 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 11:27:11.551 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 11:27:11.557 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 6.1531ms
2025-11-29 11:27:11.651 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.9163ms
2025-11-29 11:27:11.786 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 11:27:11.797 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.2613ms
2025-11-29 11:27:11.798 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/favicon-32x32.png - null null
2025-11-29 11:27:11.830 +06:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-11-29 11:27:11.830 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/favicon-32x32.png - 200 628 image/png 31.98ms
2025-11-29 11:27:53.802 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:27:53.810 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:27:53.872 +06:00 [INF] Executed DbCommand (12ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:27:54.250 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:27:54.260 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:27:54.859 +06:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:27:54.867 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'EduSystem.Identity.Infrastructure.Contexts.IdentityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7493b6dd-ca3e-49ad-83aa-3be9fd707691
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7493b6dd-ca3e-49ad-83aa-3be9fd707691
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 11:27:58.040 +06:00 [INF] Setting HTTP status code 400.
2025-11-29 11:27:58.040 +06:00 [INF] Writing value of type '<>f__AnonymousType11`1' as Json.
2025-11-29 11:27:58.041 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:27:58.042 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 400 null application/json; charset=utf-8 4239.5241ms
2025-11-29 11:28:19.436 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:28:19.438 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:28:34.834 +06:00 [INF] Executed DbCommand (686ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:28:35.097 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:28:35.099 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:28:35.259 +06:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:28:35.263 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'EduSystem.Identity.Infrastructure.Contexts.IdentityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7493b6dd-ca3e-49ad-83aa-3be9fd707691
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7493b6dd-ca3e-49ad-83aa-3be9fd707691
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 11:30:55.075 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 11:30:55.683 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 11:30:55.875 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 11:30:56.549 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 11:30:56.644 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 11:30:56.671 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 11:30:56.742 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 11:30:56.742 +06:00 [INF] Hosting environment: Development
2025-11-29 11:30:56.742 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 11:30:56.951 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 322.2794ms
2025-11-29 11:30:56.968 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 11:30:57.064 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 394.8656ms
2025-11-29 11:30:57.949 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 11:30:57.963 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 13.8559ms
2025-11-29 11:30:58.016 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 11:30:58.022 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 6.1546ms
2025-11-29 11:30:58.030 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 11:30:58.078 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.3206ms
2025-11-29 11:30:58.247 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 11:30:58.284 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.8318ms
2025-11-29 11:31:21.821 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:31:21.884 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:31:21.910 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 11:31:32.713 +06:00 [INF] Executed DbCommand (121ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:31:55.832 +06:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:32:22.817 +06:00 [INF] Executed DbCommand (19ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:33:20.608 +06:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:33:20.645 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'EduSystem.Identity.Infrastructure.Contexts.IdentityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c7ae27f1-28d3-4f20-8004-87d1dedd0901
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c7ae27f1-28d3-4f20-8004-87d1dedd0901
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 11:33:53.955 +06:00 [INF] Setting HTTP status code 400.
2025-11-29 11:33:53.959 +06:00 [INF] Writing value of type '<>f__AnonymousType11`1' as Json.
2025-11-29 11:33:53.963 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:33:53.972 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 400 null application/json; charset=utf-8 152151.0674ms
2025-11-29 11:33:56.256 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:33:56.258 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:34:01.107 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:34:02.892 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:34:28.221 +06:00 [INF] Executed DbCommand (19ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:34:30.928 +06:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:34:30.932 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'EduSystem.Identity.Infrastructure.Contexts.IdentityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c7ae27f1-28d3-4f20-8004-87d1dedd0901
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'LastLoginAt'.
Invalid column name 'LastPasswordChangedAt'.
Invalid column name 'LockoutEnd'.
Invalid column name 'PasswordResetToken'.
Invalid column name 'PasswordResetTokenExpiry'.
Invalid column name 'RefreshToken'.
Invalid column name 'RefreshTokenExpiryTime'.
Invalid column name 'UpdatedAt'.
Invalid column name 'LoginAttempts'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c7ae27f1-28d3-4f20-8004-87d1dedd0901
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 11:44:19.729 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 11:44:20.225 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 11:44:20.388 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 11:44:20.998 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 11:44:21.041 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 11:44:21.108 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 11:44:21.108 +06:00 [INF] Hosting environment: Development
2025-11-29 11:44:21.108 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 11:44:21.304 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 274.5499ms
2025-11-29 11:44:21.326 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 11:44:24.157 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 11:44:24.266 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 109.8817ms
2025-11-29 11:44:24.332 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 11:44:24.332 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 11:44:24.368 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 35.3005ms
2025-11-29 11:44:24.386 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.8075ms
2025-11-29 11:44:24.518 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 11:44:24.531 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.6725ms
2025-11-29 11:44:39.238 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:44:39.264 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:44:39.283 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 11:44:44.816 +06:00 [INF] Executed DbCommand (83ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:44:49.591 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:45:09.216 +06:00 [INF] Executed DbCommand (23ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:45:18.767 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:45:20.934 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 11:45:21.110 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 11:46:20.906 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 11:46:20.910 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 11:46:20.917 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:46:20.925 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 101687.7031ms
2025-11-29 11:48:54.465 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:48:54.467 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:48:59.883 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:49:05.308 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:49:06.316 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:49:06.604 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:49:24.702 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 11:49:24.727 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 11:49:58.190 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 11:50:14.298 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 11:50:15.900 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 11:50:19.883 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 11:50:19.883 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 11:50:19.885 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:50:19.885 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 85420.8983ms
2025-11-29 11:51:40.509 +06:00 [WRN] [Attendance] Failed to apply migrations for tenant: Barisal. Retry 1/3
Microsoft.Data.SqlClient.SqlException (0x80131904): Login failed for user 'tenant_Barisal_user'.
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at EduSystem.Shared.Messaging.Handlers.BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 52
   at EduSystem.Shared.Messaging.Handlers.BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 66
ClientConnectionId:812198a8-1882-4a95-9efc-fe070f125b00
Error Number:18456,State:1,Class:14
2025-11-29 11:51:42.536 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 11:52:25.702 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 11:52:25.703 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 11:52:28.560 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:52:30.934 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 11:52:32.287 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 11:52:32.438 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 11:52:48.914 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 16:43:50.214 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 16:43:50.915 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 16:43:51.091 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 16:43:51.743 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 16:43:51.800 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 16:43:51.930 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 16:43:51.930 +06:00 [INF] Hosting environment: Development
2025-11-29 16:43:51.930 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 16:43:52.199 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 406.1939ms
2025-11-29 16:43:52.222 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 16:43:56.561 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 16:43:56.684 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 125.0008ms
2025-11-29 16:43:56.770 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 16:43:56.789 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 16:43:56.802 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 26.5847ms
2025-11-29 16:43:56.837 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.2546ms
2025-11-29 16:43:56.961 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 16:43:56.976 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.01ms
2025-11-29 16:44:35.419 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 16:44:35.456 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:44:35.478 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 16:44:50.170 +06:00 [INF] Executed DbCommand (105ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 16:45:02.264 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 16:45:11.443 +06:00 [INF] Executed DbCommand (17ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 16:45:19.273 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 16:45:32.659 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 16:45:38.385 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 16:47:27.464 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 16:47:27.468 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 16:47:27.535 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:47:27.545 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 172125.5785ms
2025-11-29 16:47:52.603 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 16:47:52.607 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:47:57.076 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 16:47:57.236 +06:00 [INF] Setting HTTP status code 400.
2025-11-29 16:47:57.238 +06:00 [INF] Writing value of type '<>f__AnonymousType11`1' as Json.
2025-11-29 16:47:57.239 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:47:57.239 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 400 null application/json; charset=utf-8 4636.1133ms
2025-11-29 16:50:36.084 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 16:50:36.536 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 16:50:36.682 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 16:50:37.332 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 16:50:37.371 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 16:50:37.488 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 16:50:37.488 +06:00 [INF] Hosting environment: Development
2025-11-29 16:50:37.488 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 16:50:37.692 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 334.6042ms
2025-11-29 16:50:37.714 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 16:50:39.731 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 16:50:39.869 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 139.5358ms
2025-11-29 16:50:39.929 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 16:50:39.934 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 16:50:39.961 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 31.7127ms
2025-11-29 16:50:39.980 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.4388ms
2025-11-29 16:50:40.080 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 16:50:40.094 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.7687ms
2025-11-29 16:50:48.728 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 16:50:48.751 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:50:48.777 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 16:51:00.687 +06:00 [INF] Executed DbCommand (89ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 16:51:04.347 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 16:51:08.565 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 16:51:08.935 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 16:51:16.857 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 16:51:23.037 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 16:51:23.042 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 16:51:23.045 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 16:51:23.050 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:51:23.060 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 34331.833ms
2025-11-29 16:53:17.806 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 16:53:17.811 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:53:21.477 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 16:53:22.498 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 16:53:23.633 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 16:53:23.882 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 16:53:29.205 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 16:53:33.477 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 16:54:08.108 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 16:54:08.109 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 16:54:08.160 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 16:54:08.161 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 50355.6642ms
2025-11-29 16:54:08.240 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 16:54:08.242 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 16:54:08.252 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 16:55:08.406 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 16:55:08.450 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 16:55:21.118 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 16:55:21.118 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 16:55:21.119 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:04:08.115 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:04:08.116 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:04:14.564 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:04:14.564 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:04:14.564 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:04:14.564 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:04:14.564 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:04:14.566 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:04:14.567 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:04:14.567 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:04:14.896 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:04:14.896 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:04:14.897 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:04:14.897 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:04:14.936 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:04:14.936 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:04:14.939 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:04:20.537 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:04:20.537 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:04:20.538 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:05:20.751 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:05:20.808 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:05:20.809 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:05:20.809 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:05:20.870 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:05:20.917 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:05:20.880 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:05:20.936 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:05:20.936 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:05:20.935 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:05:20.935 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:05:20.936 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:05:30.814 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:05:30.814 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:05:30.815 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:05:30.815 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:05:30.815 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:05:30.816 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:05:30.954 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:05:30.955 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:05:30.955 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:05:30.969 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:05:30.969 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:05:30.969 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:05:30.979 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:05:30.979 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:05:30.980 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:09:45.963 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 17:09:46.590 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 17:09:46.868 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 17:09:47.658 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 17:09:47.753 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 17:09:47.860 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 17:09:47.860 +06:00 [INF] Hosting environment: Development
2025-11-29 17:09:47.860 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 17:09:48.105 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 369.163ms
2025-11-29 17:09:48.129 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 17:09:57.045 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 17:09:57.149 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 105.4433ms
2025-11-29 17:09:57.220 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 17:09:57.220 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 17:09:57.244 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 22.9179ms
2025-11-29 17:09:57.259 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.5688ms
2025-11-29 17:09:57.343 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 17:09:57.363 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.0544ms
2025-11-29 17:10:25.581 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 17:10:25.614 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 17:10:25.644 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 17:10:31.018 +06:00 [INF] Executed DbCommand (83ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 17:10:32.736 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 17:10:35.942 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 17:10:38.139 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 17:10:43.106 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 17:10:43.239 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 17:10:43.245 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 17:10:43.249 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 17:10:43.257 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 17:10:43.268 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 17686.9546ms
2025-11-29 17:25:47.174 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 17:25:47.516 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 17:25:47.645 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 17:25:48.158 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 17:25:48.204 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 17:25:48.278 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 17:25:48.278 +06:00 [INF] Hosting environment: Development
2025-11-29 17:25:48.278 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 17:29:49.440 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:29:49.440 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:29:49.440 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:29:49.440 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:29:49.440 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:29:49.440 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:29:49.440 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:29:49.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:29:49.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:29:49.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:29:49.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:29:49.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:29:49.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:29:49.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:29:49.574 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 241371.8845ms
2025-11-29 17:29:49.602 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 17:29:49.769 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:29:49.769 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:29:49.769 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:29:49.769 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:29:49.769 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:29:49.769 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:29:49.769 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:29:50.585 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.CanConnectAsync(CancellationToken cancellationToken)
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 170
2025-11-29 17:29:50.585 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.CanConnectAsync(CancellationToken cancellationToken)
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 170
2025-11-29 17:29:50.844 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.CanConnectAsync(CancellationToken cancellationToken)
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 170
2025-11-29 17:29:50.728 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.CanConnectAsync(CancellationToken cancellationToken)
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 170
2025-11-29 17:29:50.767 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.CanConnectAsync(CancellationToken cancellationToken)
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 170
2025-11-29 17:29:50.585 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.CanConnectAsync(CancellationToken cancellationToken)
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 170
2025-11-29 17:29:50.844 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.CanConnectAsync(CancellationToken cancellationToken)
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 170
2025-11-29 17:29:50.860 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:29:50.860 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:29:50.860 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:29:50.861 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:29:50.861 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:29:50.861 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:29:50.862 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:32:45.520 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:32:45.520 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:32:45.520 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:32:45.520 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:32:45.520 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:32:45.520 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:32:45.520 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 1/3)
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:32:45.521 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:32:45.522 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:32:45.522 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:32:45.522 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:32:45.522 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:32:45.522 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:32:45.522 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:32:45.527 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 17:32:45.527 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 17:32:45.613 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 87.0336ms
2025-11-29 17:32:45.613 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 87.3698ms
2025-11-29 17:32:45.691 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 17:32:45.691 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 17:32:45.707 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 11.7641ms
2025-11-29 17:32:45.764 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.4388ms
2025-11-29 17:32:45.950 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 17:32:45.962 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.2377ms
2025-11-29 17:33:46.094 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:33:46.095 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:33:46.130 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:33:46.131 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:33:46.277 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:33:46.311 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:33:46.333 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:33:46.371 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:33:46.454 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:33:46.454 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:33:46.454 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 1/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:33:46.454 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:33:46.454 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:33:46.454 +06:00 [INF]  Waiting 10 seconds before retry...
2025-11-29 17:33:56.139 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:33:56.139 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:33:56.139 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:33:56.139 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:33:56.140 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:33:56.140 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:33:56.454 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:33:56.454 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:33:56.454 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:33:56.454 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:33:56.454 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 2/3)
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:33:56.455 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:33:56.456 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:34:56.550 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:34:56.550 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:34:56.569 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:34:56.588 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:34:56.577 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:34:56.569 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:34:56.588 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:34:56.588 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:34:56.825 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:34:56.825 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:34:56.957 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:34:56.969 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 2/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:34:56.969 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:34:56.969 +06:00 [INF]  Waiting 20 seconds before retry...
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 3/3)
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 3/3)
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 3/3)
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 3/3)
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:35:16.592 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:35:16.593 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:35:16.593 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:35:16.593 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:35:16.593 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:35:16.825 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 3/3)
2025-11-29 17:35:16.826 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:35:16.826 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:35:16.970 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 3/3)
2025-11-29 17:35:16.970 +06:00 [INF] [Attendance] Applying migrations for tenant: Barisal (Attempt 3/3)
2025-11-29 17:35:16.970 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:35:16.970 +06:00 [INF] [Attendance] Connecting to database: PTSL-MITHUN\SQLEXPRESS/EduSystem_Barisal
2025-11-29 17:35:16.971 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:35:16.971 +06:00 [INF] [Attendance] Testing database connection...
2025-11-29 17:36:16.643 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 3/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:16.644 +06:00 [ERR] [Attendance]  Failed to apply migrations for tenant: Barisal after 3 attempts
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:20.093 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 17:36:20.255 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 3/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:20.274 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 3/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:20.255 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 3/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:20.285 +06:00 [ERR] [Attendance]  Failed to apply migrations for tenant: Barisal after 3 attempts
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:20.284 +06:00 [ERR] [Attendance]  Failed to apply migrations for tenant: Barisal after 3 attempts
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:22.294 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 3/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:20.296 +06:00 [ERR] [Attendance]  Failed to apply migrations for tenant: Barisal after 3 attempts
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:20.295 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 3/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:23.445 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 17:36:22.294 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 17:36:22.294 +06:00 [WRN] [Attendance]  Failed to apply migrations for tenant: Barisal. Retry 3/3. Error: Cannot connect to database: EduSystem_Barisal
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:24.113 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 17:36:24.113 +06:00 [ERR] [Attendance]  Failed to apply migrations for tenant: Barisal after 3 attempts
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:22.295 +06:00 [ERR] [Attendance]  Failed to apply migrations for tenant: Barisal after 3 attempts
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:24.113 +06:00 [ERR] [Attendance]  Failed to apply migrations for tenant: Barisal after 3 attempts
System.InvalidOperationException: Cannot connect to database: EduSystem_Barisal
   at BaseMigrationHandler`1.Consume(ConsumeContext`1 context) in D:\MCH\PetProject\EduManager\src\Services\Shared\Messaging\EduSystem.Shared.Messaging\Handlers\BaseMigrationHandler.cs:line 174
2025-11-29 17:36:24.651 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.238 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.679 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.800 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.800 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.800 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.800 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.800 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.800 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 17:36:25.800 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 18:17:21.051 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 18:17:22.103 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 18:17:22.577 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 18:17:23.852 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 18:17:23.980 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 18:17:24.215 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 18:17:24.216 +06:00 [INF] Hosting environment: Development
2025-11-29 18:17:24.217 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 18:17:24.592 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 621.1335ms
2025-11-29 18:17:24.654 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 18:17:28.173 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 18:17:28.450 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 280.8938ms
2025-11-29 18:17:28.581 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 18:17:28.581 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 18:17:28.652 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 69.8439ms
2025-11-29 18:17:28.693 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.868ms
2025-11-29 18:17:29.115 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 18:17:29.143 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.7871ms
2025-11-29 18:18:04.031 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 18:18:04.090 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 18:18:04.156 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 18:18:17.051 +06:00 [INF] Executed DbCommand (196ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 18:18:22.100 +06:00 [INF]  Starting database provisioning for tenant: Barisal
2025-11-29 18:18:22.212 +06:00 [INF]  Creating database: EduSystem_Barisal
2025-11-29 18:18:23.490 +06:00 [INF]  Database created: EduSystem_Barisal
2025-11-29 18:18:23.490 +06:00 [INF]  Creating login: tenant_Barisal_user
2025-11-29 18:18:23.624 +06:00 [ERR] Failed to create login: tenant_Barisal_user
Microsoft.Data.SqlClient.SqlException (0x80131904): Incorrect syntax near '@password'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at EduSystem.Identity.Infrastructure.Service.TenantDatabaseProvisioner.CreateLoginAsync(SqlConnection connection, String user, String password) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Infrastructure\Service\TenantDatabaseProvisioner.cs:line 438
   at EduSystem.Identity.Infrastructure.Service.TenantDatabaseProvisioner.CreateLoginAsync(SqlConnection connection, String user, String password) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Infrastructure\Service\TenantDatabaseProvisioner.cs:line 443
ClientConnectionId:488c4f90-db1d-46f2-8178-8c9bd0e28d81
Error Number:102,State:1,Class:15
2025-11-29 18:18:23.695 +06:00 [ERR]  Failed to create login: tenant_Barisal_user
2025-11-29 18:18:23.940 +06:00 [INF]  Cleaned up database: EduSystem_Barisal
2025-11-29 18:19:07.187 +06:00 [INF]  Starting database provisioning for tenant: Barisal
2025-11-29 18:19:12.959 +06:00 [INF]  Creating database: EduSystem_Barisal
2025-11-29 18:19:37.218 +06:00 [INF]  Database created: EduSystem_Barisal
2025-11-29 18:19:38.973 +06:00 [INF]  Creating login: tenant_Barisal_user
2025-11-29 18:24:22.308 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 18:24:23.624 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 18:24:24.122 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 18:24:25.500 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 18:24:25.669 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 18:24:25.894 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 18:24:25.895 +06:00 [INF] Hosting environment: Development
2025-11-29 18:24:25.896 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 18:24:26.303 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 640.5357ms
2025-11-29 18:24:26.362 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 18:24:30.692 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 18:24:30.950 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 251.6872ms
2025-11-29 18:24:31.071 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 18:24:31.071 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 18:24:31.136 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 63.227ms
2025-11-29 18:24:31.179 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 107.717ms
2025-11-29 18:24:31.371 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 18:24:31.398 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.9505ms
2025-11-29 18:24:44.646 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 18:24:44.714 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 18:24:44.784 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 18:24:55.535 +06:00 [INF] Executed DbCommand (210ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 18:25:12.089 +06:00 [INF]  Starting database provisioning for tenant: Barisal
2025-11-29 18:25:18.511 +06:00 [INF]  Creating database: EduSystem_Barisal
2025-11-29 18:25:28.898 +06:00 [INF]  Database created: EduSystem_Barisal
2025-11-29 18:25:30.085 +06:00 [INF]  Creating login: tenant_Barisal_user
2025-11-29 18:25:49.248 +06:00 [INF] Login already exists: tenant_Barisal_user
2025-11-29 18:26:40.248 +06:00 [INF]  Login created: tenant_Barisal_user
2025-11-29 18:26:43.291 +06:00 [INF]  Creating user and assigning permissions in: EduSystem_Barisal
2025-11-29 18:26:54.774 +06:00 [INF]  User created and permissions assigned
2025-11-29 18:26:58.389 +06:00 [INF]  Verifying tenant connection...
2025-11-29 18:27:05.302 +06:00 [INF]  Connection verification attempt 1/5 for: EduSystem_Barisal
2025-11-29 18:29:14.419 +06:00 [WRN]  Connection attempt 1 failed. Error: Login failed for user 'tenant_Barisal_user'. (Number: 18456)
2025-11-29 18:29:15.430 +06:00 [INF]  Connection verification attempt 2/5 for: EduSystem_Barisal
2025-11-29 18:29:15.546 +06:00 [WRN]  Connection attempt 2 failed. Error: Login failed for user 'tenant_Barisal_user'. (Number: 18456)
2025-11-29 18:29:16.554 +06:00 [INF]  Connection verification attempt 3/5 for: EduSystem_Barisal
2025-11-29 18:29:16.653 +06:00 [WRN]  Connection attempt 3 failed. Error: Login failed for user 'tenant_Barisal_user'. (Number: 18456)
2025-11-29 18:29:17.665 +06:00 [INF]  Connection verification attempt 4/5 for: EduSystem_Barisal
2025-11-29 18:29:17.755 +06:00 [WRN]  Connection attempt 4 failed. Error: Login failed for user 'tenant_Barisal_user'. (Number: 18456)
2025-11-29 18:29:18.760 +06:00 [INF]  Connection verification attempt 5/5 for: EduSystem_Barisal
2025-11-29 18:29:18.832 +06:00 [WRN]  Connection attempt 5 failed. Error: Login failed for user 'tenant_Barisal_user'. (Number: 18456)
2025-11-29 18:29:18.833 +06:00 [ERR]  Connection verification failed: Cannot connect after 5 attempts: Login failed for user 'tenant_Barisal_user'.
2025-11-29 18:29:18.980 +06:00 [INF]  Cleaned up database: EduSystem_Barisal
2025-11-29 18:29:19.222 +06:00 [INF]  Cleaned up login: tenant_Barisal_user
2025-11-29 18:29:19.240 +06:00 [INF]  Dropping database: EduSystem_Barisal
2025-11-29 18:29:19.342 +06:00 [INF]  Cleaned up database: EduSystem_Barisal
2025-11-29 18:29:19.358 +06:00 [INF]  Cleaned up login: tenant_Barisal_user
2025-11-29 18:29:19.359 +06:00 [INF]  Database and login dropped successfully
2025-11-29 18:29:19.387 +06:00 [INF] Setting HTTP status code 400.
2025-11-29 18:29:19.404 +06:00 [INF] Writing value of type '<>f__AnonymousType11`1' as Json.
2025-11-29 18:29:19.423 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 18:29:19.457 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 400 null application/json; charset=utf-8 274811.185ms
2025-11-29 18:30:23.594 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 246
2025-11-29 18:30:23.603 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 18:30:33.015 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 18:30:44.754 +06:00 [INF]  Starting database provisioning for tenant: Barisal
2025-11-29 18:30:49.672 +06:00 [INF]  Creating database: EduSystem_Barisal
2025-11-29 18:30:53.899 +06:00 [INF]  Database created: EduSystem_Barisal
2025-11-29 18:31:12.142 +06:00 [INF]  Creating login: tenant_Barisal_user
2025-11-29 18:32:46.080 +06:00 [INF]  Login created successfully: tenant_Barisal_user
2025-11-29 18:32:49.860 +06:00 [INF]  Login created: tenant_Barisal_user
2025-11-29 18:32:50.957 +06:00 [INF]  Creating user and assigning permissions in: EduSystem_Barisal
2025-11-29 18:33:10.559 +06:00 [INF]  User created and permissions assigned
2025-11-29 18:33:14.688 +06:00 [INF]  Verifying tenant connection...
2025-11-29 18:33:22.590 +06:00 [INF]  Connection verification attempt 1/5 for: EduSystem_Barisal
2025-11-29 18:33:40.367 +06:00 [INF]  Connection verified on attempt 1
2025-11-29 18:33:51.087 +06:00 [INF]  Connection verified successfully
2025-11-29 18:33:54.397 +06:00 [INF]  Database provisioning completed successfully for: Barisal
2025-11-29 18:34:15.104 +06:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 18:34:25.698 +06:00 [INF] Executed DbCommand (20ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 18:34:32.842 +06:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 18:34:37.183 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 18:34:39.961 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 18:37:57.861 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 18:37:57.866 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 18:37:57.936 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 18:37:57.937 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 454342.8989ms
2025-11-29 18:38:11.524 +06:00 [INF] [Attendance]  Received migration event for tenant: Barisal
2025-11-29 18:38:11.524 +06:00 [INF] [Attendance]  Waiting 3 seconds before migration...
2025-11-29 18:38:11.555 +06:00 [WRN] [Attendance]  Migration cancelled during initial delay
2025-11-29 18:38:11.587 +06:00 [ERR] Consumer Channel Shutdown: "rabbitmq://localhost/TenantDatabaseCreatedEventHandler" - amq.ctag-NcZNWeUIPu8Tc8EL8Pu_Yg, Concurrent Peak: 1
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=491, text='Channel is already closed: AMQP close-reason, initiated by Library, code=541, text='Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..', classId=0, methodId=0, exception=System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.CreateException(SocketError error, Boolean forAsyncThrow)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ReceiveAsync(Socket socket, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.ReceiveAsync(Memory`1 buffer, SocketFlags socketFlags, Boolean fromNetworkStream, CancellationToken cancellationToken)
   at System.Net.Sockets.NetworkStream.ReadAsync(Memory`1 buffer, CancellationToken cancellationToken)
   at System.IO.Pipelines.StreamPipeReader.<ReadInternalAsync>g__Core|40_0(StreamPipeReader reader, Nullable`1 minimumSize, CancellationTokenSource tokenSource, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at System.IO.Pipelines.StreamPipeReader.<ReadInternalAsync>g__Core|40_0(StreamPipeReader reader, Nullable`1 minimumSize, CancellationTokenSource tokenSource, CancellationToken cancellationToken)
   at System.IO.Pipelines.StreamPipeReader.ReadInternalAsync(Nullable`1 minimumSize, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.InboundFrame.ReadFromPipeAsync(PipeReader reader, UInt32 maxInboundMessageBodySize, InboundFrame frame, CancellationToken mainLoopCancellationToken)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at RabbitMQ.Client.Impl.InboundFrame.ReadFromPipeAsync(PipeReader reader, UInt32 maxInboundMessageBodySize, InboundFrame frame, CancellationToken mainLoopCancellationToken)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ReadFrameAsync(InboundFrame frame, CancellationToken mainLoopCancellationToken)
   at RabbitMQ.Client.Framing.Connection.ReceiveLoopAsync(CancellationToken mainLoopCancellationToken)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetExistingTaskResult(Task`1 task, TResult result)
   at RabbitMQ.Client.Impl.InboundFrame.ReadFromPipeAsync(PipeReader reader, UInt32 maxInboundMessageBodySize, InboundFrame frame, CancellationToken mainLoopCancellationToken)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.Sources.ManualResetValueTaskSourceCore`1.SignalCompletion()
   at System.IO.Pipelines.StreamPipeReader.<ReadInternalAsync>g__Core|40_0(StreamPipeReader reader, Nullable`1 minimumSize, CancellationTokenSource tokenSource, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Net.Sockets.SocketAsyncEventArgs.<>c.<.cctor>b__174_0(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
   at System.Threading.ThreadPoolTypedWorkItemQueue.System.Threading.IThreadPoolWorkItem.Execute()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
   at System.Threading.Thread.StartCallback()
--- End of stack trace from previous location ---

   --- End of inner exception stack trace ---
   at System.IO.Pipelines.StreamPipeReader.<ReadInternalAsync>g__Core|40_0(StreamPipeReader reader, Nullable`1 minimumSize, CancellationTokenSource tokenSource, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at RabbitMQ.Client.Impl.InboundFrame.ReadFromPipeAsync(PipeReader reader, UInt32 maxInboundMessageBodySize, InboundFrame frame, CancellationToken mainLoopCancellationToken)
   at RabbitMQ.Client.Framing.Connection.ReceiveLoopAsync(CancellationToken mainLoopCancellationToken)
   at RabbitMQ.Client.Framing.Connection.MainLoop()', classId=0, methodId=0
   at MassTransit.RabbitMqTransport.RabbitMqReceiveLockContext.Complete() in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqReceiveLockContext.cs:line 30
   at MassTransit.Transports.PendingReceiveLockContext.Execute(Func`2 action, Boolean clearLockContext) in /_/src/MassTransit/Transports/PendingReceiveLockContext.cs:line 76
   at MassTransit.Transports.PendingReceiveLockContext.Execute(Func`2 action, Boolean clearLockContext) in /_/src/MassTransit/Transports/PendingReceiveLockContext.cs:line 89
   at MassTransit.Transports.ReceivePipeDispatcher.Dispatch(ReceiveContext context, ReceiveLockContext receiveLock) in /_/src/MassTransit/Transports/ReceivePipeDispatcher.cs:line 71
   at MassTransit.Transports.ReceivePipeDispatcher.Dispatch(ReceiveContext context, ReceiveLockContext receiveLock) in /_/src/MassTransit/Transports/ReceivePipeDispatcher.cs:line 108
   at MassTransit.Transports.ReceivePipeDispatcher.Dispatch(ReceiveContext context, ReceiveLockContext receiveLock) in /_/src/MassTransit/Transports/ReceivePipeDispatcher.cs:line 115
   at MassTransit.RabbitMqTransport.RabbitMqBasicConsumer.HandleBasicDeliverAsync(String consumerTag, UInt64 deliveryTag, Boolean redelivered, String exchange, String routingKey, IReadOnlyBasicProperties properties, ReadOnlyMemory`1 body, CancellationToken cancellationToken) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/RabbitMqBasicConsumer.cs:line 106
2025-11-29 18:38:27.789 +06:00 [INF] [Attendance]  Received migration event for tenant: Barisal
2025-11-29 18:38:27.789 +06:00 [INF] [Attendance]  Waiting 3 seconds before migration...
2025-11-29 18:38:31.188 +06:00 [INF] [Attendance]  Applying migrations (Attempt 1/5)
2025-11-29 18:38:31.196 +06:00 [INF] [Attendance]  Decrypted connection: Data Source=PTSL-MITHUN\SQLEXPRESS;Initial Catalog=EduSystem_Barisal;Integrated Security=False;User ID=tenant_Barisal_user;Password=tr$B5@07owgtW!xH;Trust Server Certificate=True
2025-11-29 18:38:31.196 +06:00 [INF] [Attendance]  Testing database connection...
2025-11-29 18:38:34.108 +06:00 [INF] [Attendance] Database connection test successful
2025-11-29 18:38:34.109 +06:00 [INF] [Attendance]  Checking database connectivity...
2025-11-29 18:38:34.115 +06:00 [INF] [Attendance]  Applying EF Core migrations...
2025-11-29 18:38:41.875 +06:00 [INF] [Attendance]  Migrations applied successfully for tenant: Barisal
2025-11-29 18:38:56.706 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 18:38:58.627 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 18:41:32.443 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/auth/login - application/json 86
2025-11-29 18:41:32.445 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 18:41:39.581 +06:00 [INF] Executed DbCommand (59ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsActive], [u].[LastLoginAt], [u].[LastPasswordChangedAt], [u].[LockoutEnd], [u].[LoginAttempts], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[PhoneNumber], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[TenantId], [u].[UpdatedAt], [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Users] AS [u]
INNER JOIN [Tenants] AS [t] ON [u].[TenantId] = [t].[Id]
WHERE [u].[Email] = @email
2025-11-29 18:41:53.921 +06:00 [INF] Executed DbCommand (16ms) [Parameters=[@id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Tenants] AS [t]
WHERE [t].[Id] = @id
2025-11-29 18:42:06.914 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 18:45:29.288 +06:00 [INF] Executing endpoint '/api/error/'
2025-11-29 18:45:35.820 +06:00 [ERR] Error ID: 4000001c-0003-fd00-b63f-84710c7967bb | Path: /api/error | Message: IDX10703: Cannot create a 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', key length is zero.
System.ArgumentException: IDX10703: Cannot create a 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', key length is zero.
   at Microsoft.IdentityModel.Tokens.SymmetricSecurityKey..ctor(Byte[] key)
   at EduSystem.Identity.Infrastructure.Service.TokenService.GenerateAccessToken(User user, Tenant tenant) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Infrastructure\Service\TokenService.cs:line 38
   at EduSystem.Identity.Application.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Application\Commands\LoginCommand.cs:line 113
   at EduSystem.Identity.Api.Endpoints.AuthEndpoints.LoginV1(LoginRequestDto request, IMediator mediator, CancellationToken cancellationToken) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api\Endpoints\AuthEndpoints.cs:line 106
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 18:45:35.838 +06:00 [INF] Setting HTTP status code 500.
2025-11-29 18:45:35.849 +06:00 [INF] Writing value of type 'ProblemDetails' as Json.
2025-11-29 18:45:35.858 +06:00 [INF] Executed endpoint '/api/error/'
2025-11-29 18:45:35.859 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: IDX10703: Cannot create a 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', key length is zero.
   at Microsoft.IdentityModel.Tokens.SymmetricSecurityKey..ctor(Byte[] key)
   at EduSystem.Identity.Infrastructure.Service.TokenService.GenerateAccessToken(User user, Tenant tenant) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Infrastructure\Service\TokenService.cs:line 38
   at EduSystem.Identity.Application.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Application\Commands\LoginCommand.cs:line 113
   at EduSystem.Identity.Api.Endpoints.AuthEndpoints.LoginV1(LoginRequestDto request, IMediator mediator, CancellationToken cancellationToken) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api\Endpoints\AuthEndpoints.cs:line 106
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 18:45:35.860 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/auth/login - 500 null application/problem+json 243416.9499ms
2025-11-29 18:45:42.710 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/auth/login - application/json 86
2025-11-29 18:45:42.716 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 18:46:20.736 +06:00 [INF] Executed DbCommand (20ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsActive], [u].[LastLoginAt], [u].[LastPasswordChangedAt], [u].[LockoutEnd], [u].[LoginAttempts], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[PhoneNumber], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[TenantId], [u].[UpdatedAt], [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Users] AS [u]
INNER JOIN [Tenants] AS [t] ON [u].[TenantId] = [t].[Id]
WHERE [u].[Email] = @email
2025-11-29 18:46:31.107 +06:00 [INF] Executed DbCommand (19ms) [Parameters=[@id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Tenants] AS [t]
WHERE [t].[Id] = @id
2025-11-29 18:53:10.139 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 18:53:11.044 +06:00 [INF] Executing endpoint '/api/error/'
2025-11-29 18:53:11.044 +06:00 [ERR] Error ID: 40000015-0001-ff00-b63f-84710c7967bb | Path: /api/error | Message: IDX10703: Cannot create a 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', key length is zero.
System.ArgumentException: IDX10703: Cannot create a 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', key length is zero.
   at Microsoft.IdentityModel.Tokens.SymmetricSecurityKey..ctor(Byte[] key)
   at EduSystem.Identity.Infrastructure.Service.TokenService.GenerateAccessToken(User user, Tenant tenant) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Infrastructure\Service\TokenService.cs:line 38
   at EduSystem.Identity.Application.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken)
   at EduSystem.Identity.Api.Endpoints.AuthEndpoints.LoginV1(LoginRequestDto request, IMediator mediator, CancellationToken cancellationToken) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api\Endpoints\AuthEndpoints.cs:line 106
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 18:53:11.050 +06:00 [INF] Setting HTTP status code 500.
2025-11-29 18:53:11.051 +06:00 [INF] Writing value of type 'ProblemDetails' as Json.
2025-11-29 18:53:11.052 +06:00 [INF] Executed endpoint '/api/error/'
2025-11-29 18:53:11.052 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: IDX10703: Cannot create a 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', key length is zero.
   at Microsoft.IdentityModel.Tokens.SymmetricSecurityKey..ctor(Byte[] key)
   at EduSystem.Identity.Infrastructure.Service.TokenService.GenerateAccessToken(User user, Tenant tenant) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Infrastructure\Service\TokenService.cs:line 38
   at EduSystem.Identity.Application.Commands.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken)
   at EduSystem.Identity.Api.Endpoints.AuthEndpoints.LoginV1(LoginRequestDto request, IMediator mediator, CancellationToken cancellationToken) in D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api\Endpoints\AuthEndpoints.cs:line 106
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 18:53:11.057 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/auth/login - 500 null application/problem+json 448343.9568ms
2025-11-29 18:53:14.748 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 18:53:14.774 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 25.4066ms
2025-11-29 18:53:14.860 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 18:53:14.861 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 1.4843ms
2025-11-29 18:53:14.889 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 18:53:14.966 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.0757ms
2025-11-29 18:53:15.150 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 18:53:15.155 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/favicon-32x32.png - null null
2025-11-29 18:53:15.163 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.072ms
2025-11-29 18:53:15.175 +06:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-11-29 18:53:15.176 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/favicon-32x32.png - 200 628 image/png 20.4886ms
2025-11-29 18:53:36.754 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/auth/login - application/json 86
2025-11-29 18:53:36.755 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 18:53:42.610 +06:00 [INF] Executed DbCommand (11ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsActive], [u].[LastLoginAt], [u].[LastPasswordChangedAt], [u].[LockoutEnd], [u].[LoginAttempts], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[PhoneNumber], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[TenantId], [u].[UpdatedAt], [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Users] AS [u]
INNER JOIN [Tenants] AS [t] ON [u].[TenantId] = [t].[Id]
WHERE [u].[Email] = @email
2025-11-29 18:53:46.780 +06:00 [INF] Executed DbCommand (15ms) [Parameters=[@id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Tenants] AS [t]
WHERE [t].[Id] = @id
2025-11-29 18:53:51.193 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 19:02:23.319 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 19:02:23.584 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 19:02:23.687 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 19:02:24.034 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 19:02:24.055 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 19:02:24.134 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 19:02:24.134 +06:00 [INF] Hosting environment: Development
2025-11-29 19:02:24.134 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 19:02:24.273 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 223.5916ms
2025-11-29 19:02:24.308 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 19:02:26.503 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 19:02:26.585 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 92.2351ms
2025-11-29 19:02:26.632 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 19:02:26.632 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 19:02:26.638 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 5.171ms
2025-11-29 19:02:26.697 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.2279ms
2025-11-29 19:02:26.947 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 19:02:26.965 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.6324ms
2025-11-29 19:02:48.343 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/auth/login - application/json 86
2025-11-29 19:02:48.388 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 19:02:48.404 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 19:03:00.198 +06:00 [INF] Executed DbCommand (129ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsActive], [u].[LastLoginAt], [u].[LastPasswordChangedAt], [u].[LockoutEnd], [u].[LoginAttempts], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[PhoneNumber], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[TenantId], [u].[UpdatedAt], [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Users] AS [u]
INNER JOIN [Tenants] AS [t] ON [u].[TenantId] = [t].[Id]
WHERE [u].[Email] = @email
2025-11-29 19:03:06.077 +06:00 [INF] Executed DbCommand (20ms) [Parameters=[@id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Tenants] AS [t]
WHERE [t].[Id] = @id
2025-11-29 19:04:16.229 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 19:11:15.859 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 19:11:16.378 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 19:11:16.559 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 19:11:17.439 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 19:11:17.515 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 19:11:17.614 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 19:11:17.615 +06:00 [INF] Hosting environment: Development
2025-11-29 19:11:17.615 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 19:11:17.780 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 269.3966ms
2025-11-29 19:11:17.807 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 19:11:19.849 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 19:11:19.962 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 113.5747ms
2025-11-29 19:11:20.012 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 19:11:20.015 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 19:11:20.018 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 5.3492ms
2025-11-29 19:11:20.086 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.9816ms
2025-11-29 19:11:20.197 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 19:11:20.219 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.647ms
2025-11-29 19:12:06.546 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/auth/me - null 0
2025-11-29 19:12:06.584 +06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-29 19:12:06.640 +06:00 [INF] Executing endpoint '/api/error/'
2025-11-29 19:12:06.650 +06:00 [ERR] Error ID: 4000000c-0001-fa00-b63f-84710c7967bb | Path: /api/error | Message: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationServiceImpl.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 19:12:06.701 +06:00 [INF] Setting HTTP status code 500.
2025-11-29 19:12:06.714 +06:00 [INF] Writing value of type 'ProblemDetails' as Json.
2025-11-29 19:12:06.729 +06:00 [INF] Executed endpoint '/api/error/'
2025-11-29 19:12:06.730 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationServiceImpl.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 19:12:06.731 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/auth/me - 500 null application/problem+json 185.0787ms
2025-11-29 19:12:25.134 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/auth/login - application/json 86
2025-11-29 19:12:25.156 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 19:12:25.179 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 19:12:31.801 +06:00 [INF] Executed DbCommand (114ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsActive], [u].[LastLoginAt], [u].[LastPasswordChangedAt], [u].[LockoutEnd], [u].[LoginAttempts], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[PhoneNumber], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[TenantId], [u].[UpdatedAt], [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Users] AS [u]
INNER JOIN [Tenants] AS [t] ON [u].[TenantId] = [t].[Id]
WHERE [u].[Email] = @email
2025-11-29 19:12:40.773 +06:00 [INF] Executed DbCommand (28ms) [Parameters=[@id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Tenants] AS [t]
WHERE [t].[Id] = @id
2025-11-29 19:13:14.568 +06:00 [INF] Executed DbCommand (22ms) [Parameters=[@p17='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 256), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 512), @p9='?' (Size = 512), @p10='?' (DbType = DateTime2), @p11='?' (Size = 20), @p12='?' (Size = 512), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FullName] = @p2, [IsActive] = @p3, [LastLoginAt] = @p4, [LastPasswordChangedAt] = @p5, [LockoutEnd] = @p6, [LoginAttempts] = @p7, [PasswordHash] = @p8, [PasswordResetToken] = @p9, [PasswordResetTokenExpiry] = @p10, [PhoneNumber] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [Role] = @p14, [TenantId] = @p15, [UpdatedAt] = @p16
OUTPUT 1
WHERE [Id] = @p17;
2025-11-29 19:13:24.540 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 19:13:24.550 +06:00 [INF] Writing value of type '<>f__AnonymousType1`3' as Json.
2025-11-29 19:13:26.665 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/login => LoginV1'
2025-11-29 19:13:26.678 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/auth/login - 200 null application/json; charset=utf-8 61544.5157ms
2025-11-29 19:13:56.000 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/api/v1/auth/verify-token - null null
2025-11-29 19:13:56.002 +06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-29 19:13:56.008 +06:00 [INF] Executing endpoint '/api/error/'
2025-11-29 19:13:56.009 +06:00 [ERR] Error ID: 4000002b-0001-fd00-b63f-84710c7967bb | Path: /api/error | Message: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationServiceImpl.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 19:13:56.012 +06:00 [INF] Setting HTTP status code 500.
2025-11-29 19:13:56.012 +06:00 [INF] Writing value of type 'ProblemDetails' as Json.
2025-11-29 19:13:56.013 +06:00 [INF] Executed endpoint '/api/error/'
2025-11-29 19:13:56.013 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationServiceImpl.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-29 19:13:56.014 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/api/v1/auth/verify-token - 500 null application/problem+json 13.7385ms
2025-11-29 19:14:25.619 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/auth/refresh-token - application/json 1309
2025-11-29 19:14:25.620 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/refresh-token => RefreshTokenV1'
2025-11-29 19:14:25.784 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsActive], [u].[LastLoginAt], [u].[LastPasswordChangedAt], [u].[LockoutEnd], [u].[LoginAttempts], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[PhoneNumber], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[TenantId], [u].[UpdatedAt], [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Users] AS [u]
INNER JOIN [Tenants] AS [t] ON [u].[TenantId] = [t].[Id]
WHERE [u].[Id] = @id
2025-11-29 19:14:25.796 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[BannerUrl], [t].[ConnectionString], [t].[CreatedAt], [t].[IsActive], [t].[LogoUrl], [t].[Name], [t].[PrimaryColor], [t].[SecondaryColor], [t].[Slug], [t].[UpdatedAt]
FROM [Tenants] AS [t]
WHERE [t].[Id] = @id
2025-11-29 19:14:25.798 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 19:14:25.798 +06:00 [INF] Writing value of type '<>f__AnonymousType1`3' as Json.
2025-11-29 19:14:25.800 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/auth/refresh-token => RefreshTokenV1'
2025-11-29 19:14:25.800 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 180.7738ms
2025-11-29 19:25:41.023 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 19:25:41.661 +06:00 [INF] Configured endpoint TenantDatabaseCreatedEventHandler, Consumer: EduSystem.Identity.Infrastructure.EventHandlers.TenantDatabaseCreatedEventHandler
2025-11-29 19:25:41.962 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 19:25:42.683 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 19:25:42.775 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 19:25:42.897 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 19:25:42.897 +06:00 [INF] Hosting environment: Development
2025-11-29 19:25:42.898 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 19:25:43.082 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 313.6739ms
2025-11-29 19:25:43.110 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 19:25:53.166 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 19:25:53.320 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 130.6779ms
2025-11-29 19:25:53.354 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 19:25:53.357 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 19:25:53.383 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 28.7278ms
2025-11-29 19:25:53.444 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.3302ms
2025-11-29 19:25:53.525 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 19:25:53.546 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.538ms
2025-11-29 19:26:33.363 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 256
2025-11-29 19:26:33.401 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 19:26:33.418 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 19:26:38.526 +06:00 [INF] Executed DbCommand (118ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 19:26:43.765 +06:00 [INF]  Starting database provisioning for tenant: Narsindhi
2025-11-29 19:26:43.811 +06:00 [INF]  Creating database: EduSystem_Narsindhi
2025-11-29 19:26:44.987 +06:00 [INF]  Database created: EduSystem_Narsindhi
2025-11-29 19:26:44.988 +06:00 [INF]  Creating login: tenant_Narsindhi_user
2025-11-29 19:26:50.199 +06:00 [INF]  Login created successfully: tenant_Narsindhi_user
2025-11-29 19:26:50.199 +06:00 [INF]  Login created: tenant_Narsindhi_user
2025-11-29 19:26:50.199 +06:00 [INF]  Creating user and assigning permissions in: EduSystem_Narsindhi
2025-11-29 19:26:50.779 +06:00 [INF]  User created and permissions assigned
2025-11-29 19:26:50.781 +06:00 [INF]  Verifying tenant connection...
2025-11-29 19:26:50.783 +06:00 [INF]  Connection verification attempt 1/5 for: EduSystem_Narsindhi
2025-11-29 19:26:50.829 +06:00 [INF]  Connection verified on attempt 1
2025-11-29 19:26:50.829 +06:00 [INF]  Connection verified successfully
2025-11-29 19:26:50.850 +06:00 [INF]  Database provisioning completed successfully for: Narsindhi
2025-11-29 19:26:52.089 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 19:26:52.994 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 19:26:53.316 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 19:26:55.759 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 19:26:55.909 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 19:26:55.918 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 19:26:55.921 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 19:26:55.928 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 19:26:55.938 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 22574.4989ms
2025-11-29 19:26:57.306 +06:00 [INF] [Attendance]  Received migration event for tenant: Narsindhi
2025-11-29 19:26:58.622 +06:00 [INF] [Attendance]  Waiting 3 seconds before migration...
2025-11-29 19:27:01.634 +06:00 [INF] [Attendance]  Applying migrations (Attempt 1/5)
2025-11-29 19:27:01.639 +06:00 [INF] [Attendance]  Decrypted connection: Data Source=PTSL-MITHUN\SQLEXPRESS;Initial Catalog=EduSystem_Narsindhi;Integrated Security=False;User ID=tenant_Narsindhi_user;Password=ZP7NuCAffykwT5tP;Trust Server Certificate=True
2025-11-29 19:27:01.639 +06:00 [INF] [Attendance]  Testing database connection...
2025-11-29 19:27:01.759 +06:00 [INF] [Attendance] Database connection test successful
2025-11-29 19:27:01.760 +06:00 [INF] [Attendance]  Checking database connectivity...
2025-11-29 19:27:01.771 +06:00 [INF] [Attendance]  Applying EF Core migrations...
2025-11-29 19:27:02.418 +06:00 [INF] [Attendance]  Migrations applied successfully for tenant: Narsindhi
2025-11-29 19:27:05.563 +06:00 [INF] Publishing event: ServiceMigrationCompletedEvent
2025-11-29 19:27:05.581 +06:00 [INF] Event published: ServiceMigrationCompletedEvent
2025-11-29 19:31:26.173 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 19:31:26.192 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 18.8829ms
2025-11-29 19:31:26.294 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 19:31:26.296 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 1.1104ms
2025-11-29 19:31:26.312 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 19:31:26.340 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.6119ms
2025-11-29 19:31:26.631 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 19:31:26.644 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.7969ms
2025-11-29 19:42:30.443 +06:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-11-29 19:42:31.064 +06:00 [INF] User profile is available. Using 'C:\Users\PTSL-Mithun\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 19:42:31.640 +06:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-29 19:42:31.872 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/ - null null
2025-11-29 19:42:31.976 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 19:42:31.976 +06:00 [INF] Hosting environment: Development
2025-11-29 19:42:31.976 +06:00 [INF] Content root path: D:\MCH\PetProject\EduManager\src\Services\Identity\EduSystem.Identity.Api
2025-11-29 19:42:32.182 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/ - 404 null null 315.3689ms
2025-11-29 19:42:32.212 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44307/, Response status code: 404
2025-11-29 19:42:34.062 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/index.html - null null
2025-11-29 19:42:34.174 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/index.html - 200 null text/html;charset=utf-8 113.4ms
2025-11-29 19:42:34.238 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 19:42:34.241 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/_vs/browserLink - null null
2025-11-29 19:42:34.270 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_framework/aspnetcore-browser-refresh.js - 200 16528 application/javascript; charset=utf-8 27.1729ms
2025-11-29 19:42:34.292 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.4423ms
2025-11-29 19:42:34.534 +06:00 [INF] Request starting HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - null null
2025-11-29 19:42:34.550 +06:00 [INF] Request finished HTTP/2 GET https://localhost:44307/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.7985ms
2025-11-29 19:43:13.424 +06:00 [INF] Request starting HTTP/2 POST https://localhost:44307/api/v1/tenants/register - application/json 241
2025-11-29 19:43:13.453 +06:00 [INF] Executing endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 19:43:13.474 +06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-29 19:43:15.969 +06:00 [INF] Executed DbCommand (89ms) [Parameters=[@slug='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenants] AS [t]
        WHERE [t].[Slug] = @slug) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 19:43:16.041 +06:00 [INF]  Starting database provisioning for tenant: canada
2025-11-29 19:43:16.116 +06:00 [INF]  Creating database: EduSystem_canada
2025-11-29 19:43:17.363 +06:00 [INF]  Database created: EduSystem_canada
2025-11-29 19:43:17.363 +06:00 [INF]  Creating login: tenant_canada_user
2025-11-29 19:43:17.880 +06:00 [INF]  Login created successfully: tenant_canada_user
2025-11-29 19:43:17.880 +06:00 [INF]  Login created: tenant_canada_user
2025-11-29 19:43:17.880 +06:00 [INF]  Creating user and assigning permissions in: EduSystem_canada
2025-11-29 19:43:18.474 +06:00 [INF]  User created and permissions assigned
2025-11-29 19:43:18.475 +06:00 [INF]  Verifying tenant connection...
2025-11-29 19:43:18.477 +06:00 [INF]  Connection verification attempt 1/5 for: EduSystem_canada
2025-11-29 19:43:18.497 +06:00 [INF]  Connection verified on attempt 1
2025-11-29 19:43:18.497 +06:00 [INF]  Connection verified successfully
2025-11-29 19:43:18.504 +06:00 [INF]  Database provisioning completed successfully for: canada
2025-11-29 19:43:18.807 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 100), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tenants] ([Id], [BannerUrl], [ConnectionString], [CreatedAt], [IsActive], [LogoUrl], [Name], [PrimaryColor], [SecondaryColor], [Slug], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 19:43:18.838 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@email='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @email) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 19:43:19.546 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 200), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 512), @p8='?' (Size = 512), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (Size = 512), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedAt], [Email], [FullName], [LastLoginAt], [LastPasswordChangedAt], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [PhoneNumber], [RefreshToken], [RefreshTokenExpiryTime], [Role], [TenantId], [UpdatedAt])
OUTPUT INSERTED.[IsActive], INSERTED.[LoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-11-29 19:43:19.610 +06:00 [INF] Publishing event: TenantDatabaseCreatedEvent
2025-11-29 19:43:19.893 +06:00 [INF] Event published: TenantDatabaseCreatedEvent
2025-11-29 19:43:19.899 +06:00 [INF] Setting HTTP status code 200.
2025-11-29 19:43:19.905 +06:00 [INF] Writing value of type '<>f__AnonymousType10`2' as Json.
2025-11-29 19:43:19.914 +06:00 [INF] Executed endpoint 'HTTP: POST /api/v{version:apiVersion}/tenants/register => RegisterTenantV1'
2025-11-29 19:43:19.931 +06:00 [INF] Request finished HTTP/2 POST https://localhost:44307/api/v1/tenants/register - 200 null application/json; charset=utf-8 6507.6033ms
